# シングルプロセス・シングルスレッドとコールバック
- JS はシングルプロセス・シングルスレッドの言語であり，コールスタック（サブルーチンの呼び出し順序を格納しているもの）も１つ

## ブロッキング
- （時間のかかる）処理中，他の処理は実行されないということ
- AJAX 通信（ここでは単に非同期通信の意味合いで使っている？）も直列に実装すると待ち時間が発生するし，このままだと**長いイベントをハンドリングするときも他の処理ができないことになる**

## ノンブロッキング
- ブロッキングの逆
- Node.js はノンブロッキングI/Oを扱える
- `setTimeout()`はノンブロッキング関数で実行されると，**第一引数の処理をいったん保留にして処理を終える**

### ノンブロッキングを成し遂げるための立役者
- **ユーザからのイベントやブラウザからのイベントを一時的に蓄えておく領域として，「メッセージキュー」がある**
- メッセージキューに蓄えられたメッセージはコールスタックが空のときに１つずつ戻される
- **コールバック関数はある条件を満たしたとき（`setTimeout(callback(), 1000)`だと1000ms たった後），メッセージキューに蓄積される**
- つまり，setTimeout は1000ミリ秒たったあとに**メッセージキューに蓄えられるだけで，その後コールスタックに戻されるまでにさらに時間がかかるので実際には1000ミリ秒ぴったりで実行されるわけではない**
- 常にコールスタックを監視しており，イベントがあればそれを実行する**イベントループという無限ループが存在する**

### ノンブロッキングの弊害
- コールバック地獄（コールバック関数の結果を受けてその後の処理をしたい場合などにネストがとんでもなく深くなるとい地獄のこと）