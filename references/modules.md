# 🚧モジュール

## モジュールの基礎
- モジュールがないと，保守性，変数名の衝突回避，再利用性などが担保されず面倒
- JSでは，`import` or `export`を１つ以上含むファイルを**モジュール**という
- **パッケージは`package.json`と JS ファイル群をもつディレクトリ**を指す
- モジュールの目的は，開発における再利用性，変数名の衝突回避，保守性を担保することで，パッケージの目的は配布となっている

## モジュールとエコシステム
- （モジュール）バンドラーとして`webpack`の他に`parcel`, `rollup`, `esbuild`, `vite`がある
- バンドラーが行うのは，（JS, 画像，CSS, TS などの）ファイルをまとめることで，それに付随してコードの最適化も行う
- **元々フロント JS ではモジュールの機能が存在しなかったため，バンドラーの存在は不可欠だったが，ES2015からモジュールシステムが導入されてたため，バンドラーを用いずとも動かすことは可能となっている．しかし，多数のコードをばらばらにダウンロードして実行するのは時間がめっちゃかかるので未だにバンドラーが必要とされている**
- **サーバーサイドでは，モジュールが大量にあったとしてもロードするのはサーバーの起動時だけなのでバンドラーの利点はほとんどない**

- まとめると，フロントJSはファイルを１つしか読み込めないシステムだったので，１つにまとめるツールの存在が必要とされたが，途中で複数のファイルを読み込めるシステムに拡張された．しかし，複数のファイルを読み込めたとしても多くのファイルを読み込むのに時間がかかる＆書き方が最適化されていないと遅い＆依存関係のミスでバグが起こり得るので未だにバンドラーは活躍している
- しかし，バックエンドJS はシステムとして古来よりモジュールを持っていたのでバンドルする必要はなかったし，パフォーマンスの観点から遅くなる問題もないので使われない

## モジュールシステム
- 2009年，ServerJS を端に発したサーバーサイドのモジュールシステムで後に，CommonJS へと名前を変える（`require()`, `module.exports`）
- 歴史的には，Node.js は CommonJS と同時期にリリースされ，CommonJS を採用していた
- CommonJS 登場の前年には，ブラウザベンダー間の意見対立から ES4の草案破棄があり，提案されていたモジュールシステムが白紙に戻ったことも CommonJS が出てくることを後押しした
- CommonJS で書かれたライブラリも多く作成され，これがフロントで需要が出始めると webpack などのバンドラーが CommonJS をサポートし始めることでフロントでも CommonJS に頼る形に
- ES6という大型アップデートで公式によるモジュールシステムである ES モジュール（`import`, `export`）が実現した
- とはいえ，過去の遺産を全て捨て去ることもできないので，Node.js において CommonJS を ES モジュールで import できるようになったことから徐々に ES モジュールを動かす環境に移行し，共存する形になった

------------------
## ESモジュールの構文
## モジュール解決
## ESモジュールの仕様
## CommonJSのAPI
## TypeScriptとモジュール
## ESモジュールのベストプラクティス